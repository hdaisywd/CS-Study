# 라우터란?

OSI 3계층인 네트워크 층의 장비로, 서로 다른 네트워크를 연결해주고 데이터를 가장 효율적인 방식으로 전달해주는 능력을 가진 장비다. 라우터는 크게 두가지 일을 한다. 

1. 경로 설정 (Path Determination) <br>
: 목적지까지 가는 길을 검색하고 어떤 길이 가장 적합할지 결정한다.

2. 스위칭 (Switching) <br>
: 경로 설정이 완료되면 목적지까지 데이터 패킷을 스위칭해주는 일을 한다. 

# 라우팅 전송 과정

## 라우터 세팅 방법

1. 라이터 인터페이스1 물리적으로 배선을 해준다
2. 인터페이스1 활성화해준다 
3. 라우터 인터페이스에 IP 주소를 할당한다 

-> 네트워크 통신 가능!

## 라우팅 과정 

<img width="659" alt="image" src="https://github.com/hdaisywd/CS-Study/assets/102342953/22dd9225-97dd-4721-8a88-f6795f7895d8">

1. 라우팅할 IP 패킷을 받는다 

2. 목적지로 보내기 위한 넥스트홉을 결정한다 (IP 헤더는 바뀌지 않는다) <br>
: 넥스트홉? 목적지까지 데이터를 보내기 위한 다음 디바이스의 IP 주소

3. 보낸다 

## 라우팅 시 변하는 것 

1. 이더넷 헤더

2. FCS(Frame Check Sequence) <br>
: 전송되는 동안 오류가 났는지 체크하는 부분 

3. TTL을 -1 해준다 <br>
: TTL? (Time To Live) - 컴퓨터나 네트우커ㅡ에서 데이터의 유효 기간을 나타내기 위한 방법이다. 무한 순환을 방지하는 역할의 IP 헤더의 필드이다. TTL은 타임스탬프의 형태로 데이터에 포함되며, 정해진 유효기간이 지나면 데이터는 폐기된다. 

# 라우팅 테이블?

목적지 네트워크로 IP 패킷을 전송하기 위한 경로가 등록돼 있다. 테이블에 등록된 네트워크 정보를 **루트 정보** 또는 **경로 정보**라고 부른다. <br>
: 경로 정보 - 네트워크 주소/서브넷 마스크, 넥스트홉 주소

## 라우팅 테이블 만드는 법 

### 1. 직접 접속

<img width="539" alt="image" src="https://github.com/hdaisywd/CS-Study/assets/102342953/22c4900e-9938-49bd-83c7-74ba70ae6da3">

인터페이스 활성화를 해준다. 라우터 인터페이스에 IP 주소를 설정해준다. IP 주소의 경로가 라우팅 테이블에 등록된다. 

### 2. 스태틱 라우팅

<img width="623" alt="image" src="https://github.com/hdaisywd/CS-Study/assets/102342953/fe8e0517-dd82-45db-a598-5111e7a11bf9">

커맨드 입력으로 수동으로 라우팅 테이블에 네트워크 주소, 서브넷 마스크, 넥스트홉 주소를 입력해준다. 

#### 장점: 라우터 CPU에 라우팅 오버 헤드가 없어서 저렴한 라우터를 사용하여 라우팅을 수행할 수 있다. 관리자가 특정 네트워크로의 라우팅만 허용하므로 보안이 강화된다. 

#### 단점: 대규모 네트워크의 경우 인적 자원이 많이 소요된다. 관리자는 토폴로지에 대해 잘 알고 있어야 하며 새 관리자가 오면 각 경로를 수동으로 추가해야 하므로 토폴로지 경로에 대해 잘 알고 있어야 한다. 

> 네트워크 토폴로지? 물리적 네트워크 토폴로지는 다양한 네트워크 구성 요소의 배치이다.. 커넥터는 서로 다른 물리적 네트워크 케이블을 나타내며, 노드는 물리적 네트워크 디바이스(예: 스위치)를 나타낸다. 논리적 네트워크 토폴로지는 데이터가 네트워크 내에서 어떻게 이동하는지를 상위 수준에서 표현한다. 

### 3. 라우터끼리 정보 교환 (다이나믹 라우팅)

라우터의 라우팅 프로토콜을 활성화 하여 연결된 라우터 끼리 정보를 교환한다. 라우팅 테이블에서 경로의 현재 상태에 따라 경로를 자동으로 조정하게 되며 하나의 경로가 다운되면 네트워크 대상에 도달하도록 자동 조정이 된다. 

1. 라우터는 경로를 교환하기 위해 동일한 동적 프로토콜을 실행해야한다. 
2. 라우터가 토폴로지에서 변경 사항을 찾으면 라우터는 이를 다른 모든 라우터에 알린다. 

#### 장점: 구성이 쉽다. 대상 원격 네트워크에 대한 최상의 경로를 선택하고 원격 네트워크를 검색하는데 더 효과적이다. 

#### 단점: 다른 장비들과 통신하기 위해 더 많은 대역폭을 소비한다. 정적 라우팅보다 보안이 취약하다. 