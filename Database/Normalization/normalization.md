# 목차 
[1. 정규화란?](#정규화-normalization) <br>
[2. 정규화 모델 1단계](#제-1-정규화1nf) <br>
[3. 정규화 모델 2단계](#제-2-정규화2nf) <br>
[4. 정규화 모델 3단계](#제-3-정규화3nf) <br>
[5. 정규화 모델 4단계](#제-4-정규화4nf) <br>
[6. 정규화 모델 5단계](#제-5-정규화5nf) <br>


## 정규화 (Normalization)
<img src="asset/What-is-Normalization-in-DBMS_th.webp">
<br/><br/>

- **정규화란?** <br>
> 관계형 데이터 베이스에서 데이터가 많아질수록 발생할 수 있는 문제점 (anomalies, errors, dulpications)을 줄이도록 거치는 과정.<br/>
쉽게 말해, 테이블에 반복되거나 중복되는 데이터를 줄이기 위해 사용하는 기술을 뜻한다.<br/>
DB에 중복되는 데이터를 줄임으로써 무결성(Integrity)를 유지하고 용량 또한 줄일 수 있게 되는데,<br/>
이를 통해 발생할 수 있는 데이터 관련 문제를 해소한다.

데이터를 담고 있는 테이블의 정보를 분석하고 연결하여 A와 B의 관계를 담고자 하는 테이블에<br/>C의 데이터가 담기거나 A와 B의 연결성을 헤치는 데이터를 분리하는 과정을 거친다.

한 예로, 중복 데이터는 CRUD의 모든 면에 있어 방해를 할 수 있는데,<br/>
특정 데이터가 반복되거나 중복이 될 경우, 데이터에 변형(수정, 추가, 삭제)을 하는 시점에 의도했던 것보다 더 많은 데이터를 삭제할 가능성, 한 타입의 데이터가 모두 삭제될 가능성 등의 문제점이 발생한다.

이를 방지하고자 거치는 과정을 정규화라 한다.
약간의 TMI로 NF는 Normal Form을 뜻한다!
말그대로 데이터를 여러 단계로 평범하게, 정규화하는 과정이다는 점을 강조하는 것 같다.
<br/><br/><br/>
여전히 복잡하다면 하나로 묶여있는 모든 데이터를 여러 테이블로 분리를 하고
각각 필요한 데이터를 참조할 수 있도록 하여 연결시키고 하나의 테이블에서 데이터를 수정하면 참조하고 있는 모든 데이터의 값이 바뀌어 - 해야하는 반복 작업을 줄인다.
<br/><br/>
**한번 딮 다이브를 해보자!
정규화에 있어 데이터 분해는 총 5가지 순서를 거친다.**
<br/><br/>
## 정규화 단계 (1~5)
<img src="asset/Nomalization.webp">

### 제 1 정규화(1NF)
**테이블 컬럼에 하나의 값만 가지게 한다.**<br/>
'테이블의 모든 속성을 원자 값만으로 구성한다'고 표현한다.

1NF에는 만족해야하는 규칙이 존재하는데,<br/>
***1. 컬럼에는 하나의 속성만 가져야 함***<br/>
***2. 하나의 컬럼에 하나의 타입을 가져야 함***<br/>
***3. 각 칼럼은 유일한 명칭이 있어야 함***<br/>
***4. 순서는 상관없어야 함***<br/>

위와 같이 규칙들이 존재한다고 한다.<br/>
해당 규칙들을 만족할 경우, 테이블은 '제 1정규형'으로 불리게 된다.

테이블에 들어가는 컬럼 값을 원자 값(단 하나)으로 제한하는 이유는 <br/>
***1. 데이터를 쉽게 찾기 용이***<br/>
***2. 데이터 수정 용이***<br/>
위와 같은 이유가 가장 크다.

테이블에 정리된 데이터를 별도로 찾거나 추출할 때 여러 값들이 걸쳐있을 경우
의도치 않게 더 많은 데이터를 검색하게 되는 경우가 발생하거나
깔끔하게 보이지 않아 복잡한 이유도 있겠다.

무엇보다 검색을 할 때 단순히 검색하고자 하는 키워드만 찾는것이 아니라
키워드 앞에 필터링을 하는 코드를 작성해야하는 만큼 복잡성이 높아지게 된다.

___
### 제 2 정규화(2NF)

2NF에서도 만족해야하는 규칙이 존재하는데,<br/>
***1. 1정규형을 만족해야한다.***<br/>
***2. 모든 칼럼이 부분적 종속이 없어야 한다. 완전 함수 종속을 만족해야한다***

특히 '모든 칼럼이 완전 함수 종속을 만족해야한다'는 표현이 중요하다.<br/>
이는 쉽게 말해 연관 있는 데이터끼리 묶어서 테이블에 불필요한 데이터 연결을 줄이자는 부분!

말도 안되지만, 딕셔너리 값을 생각해보면 쉬울 듯하다.<br/>
키 값이 두 개, Value 값이 두 개인 딕셔너리가 있다고 생각해보자.<br/>
하나의 키가 하나의 값과 연결되어 있어야 원하는 데이터를 쉽게 이해할 수 있는데,<br/>
2개의 키를 찾아도 하나의 값 또는 여러 값이 섞여서 나온다고 생각하면 데이터 의존도 및 이해도가 떨어질 것이다!

따라서 제 2 정규화에서는 연관되는 데이터를 분해함으로써 원하는 데이터를 찾을 수 있도록 돕는다.

단, 데이터를 이해하기 쉽게 분해하는 과정이다보니 이후 데이터를 수정해야하거나 변경이 될 때 하나 이상의 테이블을 참고해야하는 단점이 발생한다.

**2 정규형을 세부적으로 들어간다면,**
단, 데이터를 명확하게 구분하기 위해서 Primary Key가 무엇인지 알아야 한다.<br/>
만일 데이터에 존재하지 않다면, 한 개 이상의 행을 조합하여 Primary Key를 대체하는 Composite Primary Key를 만들 수 있다. 더불어 Primary Key에 종속되는 데이터가 존재하는데, 이를 partial Dependency라 부른다. Primary Key와 연관이 되는 - 연결이 되어 있는 데이터를 분리하는 과정을 제 2정규화라고 이해하면 된다.

___
### 제 3 정규화(3NF)
3NF에서 만족해야하는 규칙은 아래와 같다.<br/><br/>***1. 2 정규화를 만족해야 한다***<br/>
***2. 기본 키를 제외한 속성들 간의 이행 종속성이 없어야 한다.***<br/><br/>
이행 종속은 데이터 변경으로 인해 발생할 수 있는 이전 데이터 참조를 말하는데,
간단한 예를 들어보자!
<br/><br/>
<img src="asset/3NF 이전.png">

이행 종속이 끊기지 않은 상황에서는 학생 번호를 검색할 경우, 강좌이름에 맞는 금액이 아닌, 내야하는 수강료를 확인하게 된다.<br/>따라서 만일 501번의 학생이 수강하는 강좌가 바뀌게 된다면, 바뀐 강좌의 비용이 아닌 이전의 20000원을 그대로 내게 된다는 점이다.

따라서 명확하게 데이터가 어떤 데이터를 참조해야하는지 구분하게 되는데,
<img src="asset/3NF 이후.png">
위 이미지를 기준으로 설명하면 '학생번호'를 찾았을 때 '수강료'가 보이면 안된다는 점이다.<br/>
이행 종속은 A에 대한 데이터가 B와 관계가 있고, B가 C와 관계를 맺고 있다면<br/>
'A = C다' 라는 관계가 성립되는 의미를 하는데 **이런 종속이 없어야 한다는 점!**
<br/><br/>
위처럼 학생번호는 강좌 이름을, 강좌 이름은 수강료만 관계 맺고 있다면 이행 종속이 없다고 볼 수 있다!

___
### 3-1. BNCNF(Boyce-Codd Normal Form)
이 단계는 3단계를 강화한 버전으로<br/>
***1. 3 정규화를 만족***<br/>
***2. 모든 결정자가 후보키 집합에 속해야 한다.***<br/><br/>
이 말은 composite primary key가 아닌 어떤 데이터가 결정자가 되면 안된다는 점이다,<br/><br/>
<img src="asset/BNCF.png">
위 이미지를 보면 3개의 데이터/칼럼이 연속적으로 연결되어 있다.
여기서 학생번호와 과목을 통해 지도교수를 확인할 수 있게 되어 있는데, 재밌는 점은 과목이 가리키고 있는 지도교수는 다른 교수로 대체 될 수 있기에 '과목 ➡ 지도 교수'가 항상 성립되지 않는다. 반면, 지도 교수로 데이터를 검색하면 과목을 볼 수 있게된다. 학생 번호와 과목이 Key 역할을 하지만 데이터를 찾을 수 없는 또는 다른 칼럼/데이터가 결정자가 되는 상황이 BCNF를 만족하지 않는다고 하는 점이다.

이를 완전하게 분리를 하여 3NF에서 보여준 학생 번호 ➡ 강좌 이름, 강좌 이름 ➡ 수강료 예시가 이루어져야 한다는 점!
___
### 제 4 정규화(4NF)
***1. BCNF 만족***<br/>
***2. 다중속은 없어야 한다.***<br/><br/>
학생 번호, 과목, 지도 교수 이미지를 보면 이해하기 쉽다!<br/>
데이터 베이스에서 학생 번호를 검색하면 어떤 데이터를 볼 수 있을까?<br/>
학생 번호는 과목과 지도 교수를 모두 볼 수 있게 되는데, 이는 하나의 값으로 여러 데이터를 확인할 수 있기에 다중속이 되어 있다고 볼 수 있는 상황이다.

*BNCF에서처럼 데이터를 하나씩 연결하는 과정을 거쳐 다중속은 제거할 수 있다.*
🤔 Q. 이미 BNCF에서 데이터를 분리해서 4NF로 들어왔는데 다중속이 가능한 단계일까?<br/><br/>
중요한 점은 하나의 키가 하나 이상의 데이터로 연결되어 있으면 안된다는 점이 있겠다!
<br/><br/>
___
### 제 5 정규화(5NF)
마지막 5단계에서는 데이터 중복을 완전 제거하기 위해 모두 분해하는 과정을 거친다.
이 이유는 Join Dependency를 제외하고자 하는 이유 때문인데,
쉽게 말하면 A라는 데이터를 위 과정들을 거쳐 A-1, A-2로 분리해도 다시 연결했을 때 A가 만들어지는 가능성을 없애기 위함이라고 한다!

*이해하려고 했으나... 이 부분은 자세히 이해되지 않아 더 공부해보겠다!*<br/>
**참고 영상 -** https://www.studytonight.com/dbms/fifth-normal-form.php

<br/><br/>
### 참고
- https://code-lab1.tistory.com/48
- https://www.youtube.com/watch?v=Y1FbowQRcmI
- https://blog.saleslayer.com/why-is-database-normalization-so-important
- https://mangkyu.tistory.com/110